[{"pageNumber":1,"pageContent":"packetlife.net by Jeremy Stretch v3.0 IEEE Cisco S PANNING T REE · P ART 1 BPDU Format Protocol ID 16 Spanning Tree Protocols Algorithm Legacy STP PVST Defined By Instances Trunking PVST+ RPVST+ MST Legacy ST 802.1D-1998 1 N/A Legacy ST Cisco Per VLAN ISL Legacy ST Cisco Per VLAN 802.1Q, ISL Rapid ST Cisco Per VLAN 802.1Q, ISL Rapid ST 802.1s, 802.1Q-2003 Configurable 802.1Q, ISL RSTP Rapid ST 802.1w, 802.1D-2004 1 N/A Spanning Tree Instance Comparison STP C A B All VLANs x Root PVST+ C A B VLAN 1 VLAN 10 VLAN 20 VLAN 30 xx xx VLAN 1,10 Root VLAN 20,30 Root MST C A B MSTI 0 (1, 10) MSTI 1 (20, 30) x x MSTI 0 Root MSTI 1 Root Field Bits Version 8 BPDU Type 8 Flags 8 Root ID 64 Root Path Cost 32 Bridge ID 64 Port ID 16 Message Age 16 Max Age 16 Hello Time 16 Forward Delay 16 Spanning Tree Specifications 802.1D-1998 PVST ISL PVST+ RPVST+ 802.1w 802.1s 802.1D-2004 802.1Q-2003 802.1Q-1998 802.1Q-2005 Link Costs 4 Mbps 250 Bandwidth Cost 10 Mbps 100 16 Mbps 62 45 Mbps 39 100 Mbps 19 155 Mbps 14 622 Mbps 6 1 Gbps 4 10 Gbps 2 Default Timers Hello Forward Delay Max Age 2s 15s 20s Port States Disabled Discarding Legacy ST Rapid ST Blocking Listening Learning Learning Forwarding Forwarding IEEE 802.1D-1998 · Deprecated legacy STP standard IEEE 802.1w · Introduced RSTP IEEE 802.1D-2004 · Replaced legacy STP with RSTP IEEE 802.1s · Introduced MST IEEE 802.1Q-2003 · Added MST to 802.1Q PVST · Per-VLAN implementation of legacy STP PVST+ · Added 802.1Q trunking to PVST RPVST+ · Per-VLAN implementation of RSTP Port Roles Root Root Legacy ST Rapid ST Designated Designated Blocking Alternate Backup Spanning Tree Operation Determine root bridge The bridge advertising the lowest bridge ID becomes th e root bridge Select root port Each bridge selects its primary port facing the root Select designated ports One designated port is selected per segment Block ports with loops All non-root and non-desginated ports are blocked 1 2 3 4 IEEE 802.1Q-2005 · Most recent 802.1Q revision 20+ Gbps 1"},{"pageNumber":2,"pageContent":"packetlife.net by Jeremy Stretch v3.0 S PANNING T REE · P ART 2 PVST+ and RPVST+ Configuration spanning-tree mode {pvst | rapid-pvst} ! Bridge priority spanning-tree vlan 1-4094 priority 32768 ! Timers, in seconds spanning-tree vlan 1-4094 hello-time 2 spanning-tree vlan 1-4094 forward-time 15 spanning-tree vlan 1-4094 max-age 20 ! PVST+ Enhancements spanning-tree backbonefast spanning-tree uplinkfast ! Interface attributes interface FastEthernet0/1 spanning-tree [vlan 1-4094] port-priority 128 spanning-tree [vlan 1-4094] cost 19 ! Manual link type specification spanning-tree link-type {point-to-point | shared} ! Enables PortFast if running PVST+, or ! designates an edge port under RPVST+ spanning-tree portfast ! Spanning tree protection spanning-tree guard {loop | root | none} ! Per-interface toggling spanning-tree bpduguard enable spanning-tree bpdufilter enable Troubleshooting show spanning-tree [summary | detail | root] show spanning-tree [interface | vlan] MST Configuration spanning-tree mode mst ! MST Configuration spanning-tree mst configuration name MyTree revision 1 ! Map VLANs to instances instance 1 vlan 20, 30 instance 2 vlan 40, 50 ! Bridge priority (per instance) spanning-tree mst 1 priority 32768 ! Timers, in seconds spanning-tree mst hello-time 2 spanning-tree mst forward-time 15 spanning-tree mst max-age 20 ! Maximum hops for BPDUs spanning-tree mst max-hops 20 ! Interface attributes interface FastEthernet0/1 spanning-tree mst 1 port-priority 128 spanning-tree mst 1 cost 19 Bridge ID Format Pri Sys ID Ext MAC Address 4 12 48 System ID Extension 12-bit value taken from VLAN number (IEEE 802.1t) Priority 4-bit bridge priority (configurable from 0 to 61440 in increments of 4096) MAC Address 48-bit unique identifier Path Selection 1 Bridge with lowest root ID becomes the root 2 3 4 Prefer the neighbor with the lowest cost to root Prefer the neighbor with the lowest bridge ID Prefer the lowest sender port ID Optional PVST+ Ehancements PortFast Enables immediate transition into the forwarding st ate (designates edge ports under MST) UplinkFast Enables switches to maintain backup paths to root BackboneFast Enables immediate expiration of the Max Age timer i n the event of an indirect link failure Spanning Tree Protection Root Guard Prevents a port from becoming the root port BPDU Guard Error-disables a port if a BPDU is received Loop Guard Prevents a blocked port from transitioning to liste ning after the Max Age timer has expired BPDU Filter Blocks BPDUs on an interface (disables STP) RSTP Link Types Point-to-Point Connects to exactly one other bridge (full duplex) Shared Potentially connects to multiple bridges (half dupl ex) Edge Connects to a single host; designated by PortFast show spanning-tree mst [...]"}]
