[{"pageNumber":1,"pageContent":"Global Configuration packetlife.net Unicast Routing Protocols Comparison Type Algorithm Distance Vector Bellman-Ford RIP Distance Vector DUAL EIGRP Link State Dijkstra OSPF Link State Dijkstra IS-IS Path Vector Path Selection BGP Admin Distance Standard 120 RFCs 2080, 2453 90/170 (external)/5 (summary) Cisco proprietary 110 RFCs 2328, 5340 115 ISO 10589, RFC 1142 20/200 (IBGP) RFC 4271 Supported Protocols Transport IPv4, IPv6 UDP/520 IPv4, IPv6, IPX, Appletalk IP/88 IPv4, IPv6 IP/89 IPv4, IPv6, CLNP Layer 2 IPv4, IPv6 TCP/179 Authentication Plain, MD5 MD5 Plain, MD5, AH (v3) Plain, MD5 MD5 RIP Metric Formula · bw = 10 7 / minimum path bandwidth in kbps · delay = interface delay in μsecs / 10 ! Enable EIGRP for an autonomous system [ipv6] router eigrp AS-number ! Specify a router ID formatted in IPv4 dotted-deci mal [eigrp] router-id router-ID ! Disable automatic classful summarization (IPv4 on ly) no auto-summary ! Enable EIGRP on interfaces by network (IPv4 only) network IPv4-address wildcard-mask ! Modify maximum paths for equal-cost load balancin g maximum-paths 1-16 ! Configure multiplier for unequal-cost load balanc ing variance 1-128 ! Configure K values to manipulate the metric formu la metric weights 0 k1 k2 k3 k4 k5 ! Explicitly identify neighbors on NBMA links neighbor IP-address interface ! Designate passive interfaces passive-interface { interface | default} ! Enable stub routing [eigrp] stub [receive-only | connected | static | s ummary | redist] Default K Values Packet Types K 1 1 K 2 0 K 3 1 K 4 0 K 5 0 1 Update 3 Query 4 Reply 5 Hello 8 Acknowledge Feasible Distance The distance advertised by a neighbor plus the cost to get to that neighbor Reported Distance The metric for a route advertised by a neighbor Stuck In Active (SIA) The condition when a route becomes unreachable and not all queries for it are answered; adjacencie s with unresponsive neighbors are reset Passive Interface An interface which does not participate in EIGRP but whose network is advertised Stub Router A router which advertises only a subset of routes, and is omitted from the route query process EIGRP Terminology Multicast Address 224.0.0.9 224.0.0.10 224.0.0.5-6 N/A N/A EIGRP Configuration Interface Configuration interface type number ! Enable EIGRP for IPv6 on the interface ipv6 eigrp AS-number ! Set the maximum bandwidth EIGRP can consume (can be >100%) ip[v6] bandwidth-percent eigrp AS-number 1-999999 ! Configure manual summarization of outbound routes ip summary-address eigrp AS-number IPv4-address subnet-mask [ AD ] ipv6 summary-address eigrp AS-number IPv6-prefix [ AD ] ! Enable MD5 authentication ip[v6] authentication mode eigrp AS-number md5 ip[v6] authentication key-chain eigrp AS-number key-chain ! Modify interface hello and hold timers ip[v6] hello-interval eigrp AS-number seconds ip[v6] hold-time eigrp AS-number seconds ! Toggle split horizon [no] ip[v6] split-horizon eigrp AS-number Troubleshooting show ip[v6] eigrp {interfaces | neighbors } show ip[v6] eigrp topology clear ip[v6] eigrp [ AS-number ] neighbors debug ip[v6] eigrp [neighbor] Default Timers Hello 5 sec Hold 15 sec LAN (>T1) 60 sec 180 sec WAN (<=T1) 256 * ( K 1 * bw + + K 3 * delay ) * K 2 * bw 256 - load K 5 rel + K 4 Router Roles Internal Router All interfaces reside within the same area Backbone Router A router with at least one interface in area 0 Area Border Router (ABR) Connects two or more areas AS Boundary Router (ASBR) Connects to additional routing domains (redistribution to or from other protocols) Troubleshooting show ip[v6] ospf [ process ] interface show ip[v6] ospf database [ LSA-type ] OSPFv2 Link State Advertisements Router Link (Type 1) Lists neighboring routers and the cost to each; flooded within an area Network Link (Type 2) Generated by a DR; lists all routers on an adjacent segment; flooded within an area Network Summary (Type 3) Generated by an ABR; advertises routes between areas ASBR Summary (Type 4) Injected by an ABR into the backbone to advertise the presence of an ASBR in a non- backbone area External Link (Type 5) Generated by an ASBR and flooded throughout the AS to advertise a route external to OSPF NSSA External Link (Type 7) Generated by an ASBR in a not-so-stubby area; converted into a type 5 LSA by the ABR when leaving the area Area Types Standard Area Default OSPF area type Stub Area External link (type 5) LSAs are replaced with a single default route Totally Stubby Area Type 3, 4, and 5 LSAs are replaced with a default route Not-So-Stubby Area (NSSA) A stub area containing an ASBR; type 5 LSAs are converted to type 7 within the area External Route Types E1 Considers the cost to the advertising ASBR plus the external cost of the route E2 (Default) The external cost of a route as seen by the ASBR; internal OSPF cost is not considered show ip[v6] ospf border-routers show ip[v6] ospf virtual-links debug ip[v6] ospf [...] Metric Formula DR/BDR Election · The BDR also maintains adjacencies with all routers in case the DR fails · Does not occur on point-to- point or multipoint links · Default priority (0-255) is 1; highest priority wins; 0 cannot be elected · DR preemption will not occur unless the current DR is reset Virtual Links · Tunnel formed to join two areas across an intermediate · Both end routers must share a common non-stub area · At least one end must reside in area 0 Adjacency States 1 2 Down Attempt 5 6 ExStart Exchange 3 4 Init 2-Way 7 8 Loading Full · The DR serves as a common point for all adjacencies on a multiaccess segment Network Types DR/BDR Elected Nonbroadcast (NBMA) Multipoint Broadcast Neighbor Discovery Hello/Dead Timers Defined By Supported Topology Multipoint Nonbroadcast Broadcast Point-to-Point Yes No 30/120 RFC 2328 Full Mesh No Yes 30/120 RFC 2328 Any No No 30/120 Cisco Any Yes Yes 10/40 Cisco Full Mesh No Yes 10/40 Cisco Point-to-Point OSPF Integrated IS-IS Network Types DIS Elected Yes Broadcast Neighbor Discovery Yes Hello/Dead Timers 10/30 Adjacency Requirements · Interface MTUs must match · Areas must match (if level 1) · System IDs must be unique · Authentication must succeed show [clns | isis] neighbors show clns interface show isis [ipv6] topology · Levels must match NSAP Addressing Interdomain Part (IDP) Portion of the address used in routing between auto nomous systems; assigned by ISO Domain-Specific Part (DSP) Portion of the address relevant only within the loc al AS Authority and Format Identifier (AFI) Identifies the authority which dictates the format of the address Initial Domain Identifier (IDI) An organization belonging to the AFI High Order DSP (HODSP) The area within the AS System ID Unique router identifier; 48 bits for Cisco devices (often taken from an Ethernet MAC address) NSAP Selector (SEL) Identifies a network layer service; always 0x00 in a NET No Point-to-Point Yes 10/30 Troubleshooting show isis [database | spf-log] debug [clns | isis] [...] ISO Routing Levels Level 0 Level 1 Level 2 Used to locate end systems Routing within an area (IS-IS) Routing between areas (IS-IS) Level 3 Inter-AS routing Terminology Type-Length-Value (TLV) Variable-length modular datasets carried by PDUs Link State PDU (LSP) Carry TLVs encompassing link state information DIS Election · Highest-priority interface elected · Highest system ID breaks SNPA tie · Default interface priority is 64 · Current DIS may be preempted, unlike OSPF · Highest SNPA (e.g. MAC or DLCI) breaks tie Sequence Number Packet (SNP) Used to request and advertise LSPs; can be complete (CSNP) or partial (PSNP) Network Entity Title (NET) Unique router ID; includes area ID Designated Intermediate System (DIS) A pseudonode responsible for emulating point-to- point links across a multi-access segment Global Configuration ! Create an OSPF process [ipv6] router ospf process-ID ! Specify a router ID formatted as IPv4 dotted-deci mal router-id router-ID ! Modify the default reference bandwidth auto-cost reference-bandwidth speed-in-mbps ! Assign interfaces to areas by network (OSPFv2) network IPv4-address wildcard-mask area area ! Identify neighbors for NBMA links (OSPFv2) neighbor IPv4-address [cost 1-65535 ] ! Configure summaries on area border routers area area range { IPv4-address subnet-mask | IPv6-prefix } ! Summarize external routes (ASBRs only) summary-address IPv4-address subnet-mask [not-advertise] summary-prefix IPv6-prefix [not-advertise] ! Originate a default route default-information originate [always] ! Designate stub, totally stubby, or not-so-stubby areas area area { stub | nssa } [no-summary] ! Create a virtual link area area virtual-link router-ID OSPF Configuration Interface Configuration interface type number ! Enable OSPF on the interface ip[v6] ospf process-ID area area ! Identify neighbors for NBMA links (OSPFv3) ipv6 ospf neighbor IPv6-address ! Set interface cost manually ip[v6] ospf cost 1-65535 ! Configure DR election priority ip[v6] ospf priority 0-255 ! Specify network type (broadcast, point-to-point, etc.) ip[v6] ospf network type ! Modify interface hello and dead intervals ip[v6] ospf hello-interval seconds ip[v6] ospf dead-interval seconds ! Enable MD5 authentication (OSPFv2) ip ospf authentication message-digest ip ospf message-digest-key key-id md5 key-string ! Enable IPsec authentication (OSPFv3) ipv6 ospf auth ipsec spi spi-number { md5 | sha1 } string OSPFv3 Link State Advertisements 0x2001 0x2002 Router LSA Network LSA 0x2003 0x2004 Inter-area prefix LSA Inter-area router LSA 0x4005 0x2007 0x0008 0x2009 AS-external LSA Type-7 LSA Link LSA Intra-area prefix LSA Name v2 Equiv. Type 1 Type 2 Type 3 Type 4 Type 5 Type 7 N/A N/A Group Membership (Type 6) Used by Multicast OSPF; unsupported by IOS 0x2006 Group membership LSA Type 6 Global Configuration ! Enable IS-IS routing router isis ! Specify one or more NET addresses net NET ! Set global routing level (default level-1-2) is-type { level-1 | level-1-2 | level-2-only } ! Configure IPv4 route summaries summary-address IP-address subnet-mask [ level ] ! Configure IPv6 route summaries address-family ipv6 summary-prefix IPv6-prefix [ level ] ! Originate a default route default-information originate IS-IS Configuration Interface Configuration interface type number ! Enable IS-IS on an interface ip[v6] router isis ! Specify interface routing level isis circuit-type { level-1 | level-1-2 | level-2-o nly } ! Set interface metric isis [ipv6] metric { 1-16777214 | maximum } ! Designate the network as point-to-point isis network point-to-point ! Configure DIS election priority isis priority 0-127 [ level-1 | level-2 ] ! Modify interface hello and dead intervals isis hello-interval seconds [ level-1 | level-2 ] isis hello-multiplier 3-1000 [ level-1 | level-2 ] ! Enable MD5 authentication isis authentication mode md5 isis authentication key-chain key-chain RIP Implementations RIPv1 Original RIP implementation, limited to classful routing (obsolete) RIPv2 Introduced support for classless routing, triggered updates, and multicast announcements (RFC 2453) RIPng (RIP Next Generation) Extends RIPv2 to support IPv6 routing (RFC 2080); functions very similarly to RIPv2 and is subsequently as limited Global Configuration ! Enable RIPv2 IPv4 routing router rip version 2 ! Disable RIPv2 automatic summarization no auto-summary ! Designate RIPv2 interfaces by network network IPv4-network ! Identify unicast-only neighbors neighbor IP-address ! Originate a default route default-information originate ! Designate passive interfaces passive-interface { interface | default} ! Modify equal-cost load balancing maximum-paths 1-16 ! Modify timers timers basic update invalid hold flush ! Enable RIPng IPv6 routing ipv6 router rip name ! Toggle split-horizon and poison-reverse [no] split-horizon [no] poison-reverse RIP Configuration Interface Configuration interface type number ! Enable RIPng on the interface ipv6 rip name enable ! Configure manual route summarization ip summary-address rip IPv4-address subnet-mask ipv6 rip name summary-address IPv6-prefix ! Enable MD5 authentication (RIPv2 only) ip rip authentication mode md5 ip rip authentication key-chain key-chain Troubleshooting show ip[v6] protocols show ip[v6] rip database debug ip rip { database | events } debug ipv6 rip [ interface ] Message Types Hello DB Descr. LS Request LS Update LS Ack RIP Configuration Terminology Split-Horizon Mitigates routing loops by ensuring a route is never advertised back to the neighbor from which it was learned Poison Reverse Learned routes are advertised back to their originator as explicitly invalid show ip[v6] ospf [ process ] neighbor · Transition tool; not ideal for permanent designs IS-IS Hello (IIH) Establish and maintain neighbor adjacencies 1 2 3 4 5 cost = reference-bandwidth link speed AFI IDI 49 Area HODSP 0005.80ff.f800.0000 0001 System ID 0000.0c00.1234 SEL 00 Interdomain Part Domain-Specific Part Condensed NSAP Example"}]
